#include <stdio.h>
#include <conio.h>

typedef struct distance
{
    int kms;
    int metres;
} DISTANCE;

DISTANCE add_distance(DISTANCE d1, DISTANCE d2);
DISTANCE subtract_distance(DISTANCE d1, DISTANCE d2);

int main()
{
    DISTANCE d1, d2, d3, d4;
    int option;

    clrscr();

    do
    {
        printf("\n*** MAIN MENU ***");
        printf("\n1. Read the distances");
        printf("\n2. Display the distances");
        printf("\n3. Add the distances");
        printf("\n4. Subtract the distances");
        printf("\n5. EXIT");
        printf("\nEnter your option: ");
        scanf("%d", &option);

        switch(option)
        {
            case 1:
                printf("\nEnter first distance (kms metres): ");
                scanf("%d %d", &d1.kms, &d1.metres);

                printf("Enter second distance (kms metres): ");
                scanf("%d %d", &d2.kms, &d2.metres);
                break;

            case 2:
                printf("\nFirst distance: %d kms %d metres", d1.kms, d1.metres);
                printf("\nSecond distance: %d kms %d metres", d2.kms, d2.metres);
                break;

            case 3:
                d3 = add_distance(d1, d2);
                printf("\nSum of distances: %d kms %d metres", d3.kms, d3.metres);
                break;

            case 4:
                d4 = subtract_distance(d1, d2);
                printf("\nDifference of distances: %d kms %d metres", d4.kms, d4.metres);
                break;

            case 5:
                printf("\nExiting program...");
                break;

            default:
                printf("\nInvalid option!");
        }

    } while(option != 5);

    getch();
    return 0;
}


DISTANCE add_distance(DISTANCE d1, DISTANCE d2)
{
    DISTANCE sum;

    sum.kms = d1.kms + d2.kms;
    sum.metres = d1.metres + d2.metres;

    if(sum.metres >= 1000)
    {
        sum.metres -= 1000;
        sum.kms += 1;
    }

    return sum;
}


DISTANCE subtract_distance(DISTANCE d1, DISTANCE d2)
{
    DISTANCE sub;

    if(d1.kms > d2.kms || (d1.kms == d2.kms && d1.metres >= d2.metres))
    {
        sub.kms = d1.kms - d2.kms;
        sub.metres = d1.metres - d2.metres;
    }
    else
    {
        sub.kms = d2.kms - d1.kms;
        sub.metres = d2.metres - d1.metres;
    }

    if(sub.metres < 0)
    {
        sub.metres += 1000;
        sub.kms -= 1;
    }

    return sub;
}
