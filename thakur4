#include <stdio.h>
#include <math.h>

// Function prototypes
void towerOfHanoi(int n, char source, char destination, char auxiliary);
int gcd(int a, int b);
int findLargest(int arr[], int n);

int main() {
    int choice;
    
    printf("=== RECURSIVE SOLUTIONS MODULE ===\n");
    
    do {
        printf("\nMenu:\n");
        printf("1. Disk Movement in Automation Systems (Tower of Hanoi)\n");
        printf("2. Fault Detection in Signal Processing (GCD of Two Numbers)\n");
        printf("3. Recursive Evaluation in Data Streams (Find Largest of 'n' Numbers)\n");
        printf("4. Exit\n");
        printf("Enter your choice: ");
        scanf("%d", &choice);
        
        switch(choice) {
            case 1: {
                // Tower of Hanoi
                int n;
                printf("\n=== DISK MOVEMENT IN AUTOMATION SYSTEMS ===\n");
                printf("Enter number of disks: ");
                scanf("%d", &n);
                printf("Sequence of moves to transfer %d disks from source to destination:\n", n);
                towerOfHanoi(n, 'A', 'C', 'B');
                printf("Total moves required: %.0f\n", pow(2, n) - 1);
                break;
            }
            
            case 2: {
                // GCD of Two Numbers
                int a, b;
                printf("\n=== FAULT DETECTION IN SIGNAL PROCESSING ===\n");
                printf("Enter two frequency values: ");
                scanf("%d %d", &a, &b);
                int result = gcd(a, b);
                printf("GCD of %d and %d is: %d\n", a, b, result);
                printf("Synchronization interval identified at: %d Hz\n", result);
                break;
            }
            
            case 3: {
                // Find Largest of n Numbers
                int n;
                printf("\n=== RECURSIVE EVALUATION IN DATA STREAMS ===\n");
                printf("Enter number of data points: ");
                scanf("%d", &n);
                
                int arr[100];
                printf("Enter %d data values (sensor readings/test scores):\n", n);
                for(int i = 0; i < n; i++) {
                    scanf("%d", &arr[i]);
                }
                
                int largest = findLargest(arr, n);
                printf("Largest value in the dataset: %d\n", largest);
                break;
            }
            
            case 4:
                printf("Exiting program. Goodbye!\n");
                break;
                
            default:
                printf("Invalid choice! Please try again.\n");
        }
    } while(choice != 4);
    
    return 0;
}

// Function to solve Tower of Hanoi problem recursively
void towerOfHanoi(int n, char source, char destination, char auxiliary) {
    // Base case: if only one disk, move it directly
    if (n == 1) {
        printf("Move disk 1 from peg %c to peg %c\n", source, destination);
        return;
    }
    
    // Move n-1 disks from source to auxiliary peg
    towerOfHanoi(n - 1, source, auxiliary, destination);
    
    // Move the nth disk from source to destination
    printf("Move disk %d from peg %c to peg %c\n", n, source, destination);
    
    // Move n-1 disks from auxiliary to destination peg
    towerOfHanoi(n - 1, auxiliary, destination, source);
}

// Function to find GCD using Euclidean algorithm recursively
int gcd(int a, int b) {
    // Base case: if b is 0, GCD is a
    if (b == 0) {
        return a;
    }
    
    // Recursive case: GCD(a, b) = GCD(b, a % b)
    return gcd(b, a % b);
}

// Function to find largest element in array recursively
int findLargest(int arr[], int n) {
    // Base case: if only one element, return it
    if (n == 1) {
        return arr[0];
    }
    
    // Recursive case: find largest in remaining n-1 elements
    int maxOfRest = findLargest(arr + 1, n - 1);
    
    // Compare first element with largest of the rest
    return (arr[0] > maxOfRest) ? arr[0] : maxOfRest;
}
